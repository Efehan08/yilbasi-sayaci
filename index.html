<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yƒ±lba≈üƒ± Geri Sayƒ±mƒ± - Y√ñNETMEN MODU</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.17.0/dist/lil-gui.umd.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(-45deg, #0f172a, #1a0b2e, #090979, #020024);
            background-size: 400% 400%;
            animation: auroraGradient 15s ease infinite;
            overflow: hidden; margin: 0;
        }
        @keyframes auroraGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        #canvas-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; opacity: 1; pointer-events: none;
        }

        /* PANELƒ∞N CSS'ƒ∞ (Daha belirgin olsun) */
        .lil-gui { 
            top: 60px !important; /* Ses butonuyla √ßakƒ±≈ümasƒ±n */
            right: 10px !important;
            z-index: 1000 !important;
        }

        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.98); z-index: 100;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            color: #fbbf24; font-size: 24px; font-weight: bold; transition: opacity 0.5s;
            cursor: pointer;
        }

        .icicle-lights-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 45; }
        .light-string { position: absolute; top: 0; width: 2px; background-color: rgba(255, 255, 255, 0.2); }
        .light-bulb-end { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 12px; height: 18px; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; background: #fff; animation: flash 1.5s infinite alternate ease-in-out; }
        .light-bulb-end::before, .light-bulb-end::after { content: ''; position: absolute; left: 0; width: 100%; height: 100%; border-radius: inherit; background-color: inherit; box-shadow: inherit; opacity: 0.8; }
        .light-bulb-end::before { bottom: 40px; } .light-bulb-end::after { bottom: 80px; }
        .light-string:nth-child(5n+1) { height: 10vh; left: 5%; animation-delay: 0.1s; }
        .light-string:nth-child(5n+2) { height: 18vh; left: 20%; animation-delay: 0.5s; }
        .light-string:nth-child(5n+3) { height: 8vh; left: 35%; animation-delay: 1.2s; }
        .light-string:nth-child(5n+4) { height: 20vh; left: 50%; animation-delay: 0.3s; }
        .light-string:nth-child(5n+5) { height: 14vh; left: 65%; animation-delay: 0.8s; }
        .light-string:nth-child(n+6) { left: 12%; } .light-string:nth-child(n+11) { left: 28%; } .light-string:nth-child(n+16) { left: 42%; } .light-string:nth-child(n+21) { left: 58%; } .light-string:nth-child(n+26) { left: 75%; } .light-string:nth-child(n+31) { left: 85%; height: 16vh; } .light-string:nth-child(n+36) { left: 95%; height: 9vh; }
        .light-string:nth-child(4n+1) .light-bulb-end { background: #ff3333; color: #ff3333; box-shadow: 0 3px 10px #ff3333; } 
        .light-string:nth-child(4n+2) .light-bulb-end { background: #3366ff; color: #3366ff; box-shadow: 0 3px 10px #3366ff; } 
        .light-string:nth-child(4n+3) .light-bulb-end { background: #33ff33; color: #33ff33; box-shadow: 0 3px 10px #33ff33; } 
        .light-string:nth-child(4n+4) .light-bulb-end { background: #ffcc33; color: #ffcc33; box-shadow: 0 3px 10px #ffcc33; } 
        @keyframes flash { 0%, 100% { opacity: 1; filter: brightness(1.8); box-shadow: 0 3px 20px currentColor; transform: translateX(-50%) scale(1.1); } 50% { opacity: 0.5; filter: brightness(0.8); box-shadow: none; transform: translateX(-50%) scale(0.9); } }

        .neon-box { box-shadow: 0 0 15px rgba(59, 130, 246, 0.2), inset 0 0 15px rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.3) !important; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(5px); }
        .icy-headline { background: linear-gradient(to right, #ffffff, #cffafe, #38bdf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 20px rgba(56, 189, 248, 0.8)); display: inline-block; position: relative; z-index: 50; font-size: clamp(24px, 5vw, 60px); line-height: 1.2; }
        
        #spotlight-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, transparent 20%, #000000 95%); opacity: 0; transition: opacity 1s ease; pointer-events: none; z-index: 40; }
        body.mode-critical #spotlight-overlay { opacity: 1; }
        body.mode-critical #countdown { z-index: 60; filter: drop-shadow(0 0 50px rgba(255, 255, 255, 0.9)); }
        body.mode-critical #headline-area, body.mode-critical .icicle-lights-container { opacity: 0.1; filter: blur(2px); transition: all 1s ease; }

        .counter-container { transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); position: relative; z-index: 50; }
        .digit { font-variant-numeric: tabular-nums; } .ui-layer { position: relative; z-index: 50; }

        main { padding-top: 15vh !important; padding-bottom: 10vh !important; }
    </style>
</head>
<body class="h-screen w-full flex flex-col items-center justify-center text-white relative">

    <div id="loading-screen" onclick="forceOpen()">
        <div>üéõÔ∏è Y√ñNETMEN MODU</div>
        <div style="font-size: 14px; color: #999; margin-top: 5px;">A√ßƒ±lƒ±nca saƒü √ºstteki men√ºden yerlerini ayarla</div>
    </div>

    <div class="icicle-lights-container">
        <div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div>
        <div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div>
        <div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div>
        <div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div><div class="light-string"><div class="light-bulb-end"></div></div>
    </div>

    <div id="spotlight-overlay"></div>
    <div id="canvas-container"></div>
    
    <button id="enableAudioBtn" onclick="enableAudio()" class="ui-layer absolute top-5 right-5 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white px-4 py-2 rounded-full text-xs transition">
        üéµ Sesi Aktif Et
    </button>

    <main class="ui-layer z-10 text-center px-4 w-full flex flex-col items-center justify-center h-full">
        <div id="headline-area" class="relative transition-all duration-1000 ease-in">
            <h1 id="headline" class="tracking-widest uppercase transition-colors duration-300 flex items-center justify-center">
                <span class="icy-headline font-black">Yeni Yƒ±la Kalan Zaman</span>
            </h1>
        </div>

        <div id="countdown" class="counter-container flex flex-wrap justify-center gap-4 md:gap-8 origin-center">
            <div id="box-days" class="neon-box flex flex-col items-center p-3 md:p-4 bg-white/5 rounded-xl md:rounded-2xl backdrop-blur-md border border-white/10 w-20 md:w-40 transition-all duration-500 cursor-default">
                <span id="days" class="digit text-2xl md:text-6xl font-black drop-shadow-lg">31</span>
                <span class="text-[10px] md:text-sm text-blue-200/70 mt-1 md:mt-2">G√úN</span>
            </div>
            <div id="box-hours" class="neon-box flex flex-col items-center p-3 md:p-4 bg-white/5 rounded-xl md:rounded-2xl backdrop-blur-md border border-white/10 w-20 md:w-40 transition-all duration-500 cursor-default">
                <span id="hours" class="digit text-2xl md:text-6xl font-black drop-shadow-lg">12</span>
                <span class="text-[10px] md:text-sm text-blue-200/70 mt-1 md:mt-2">SAAT</span>
            </div>
            <div id="box-minutes" class="neon-box flex flex-col items-center p-3 md:p-4 bg-white/5 rounded-xl md:rounded-2xl backdrop-blur-md border border-white/10 w-20 md:w-40 transition-all duration-500 cursor-default">
                <span id="minutes" class="digit text-2xl md:text-6xl font-black drop-shadow-lg">59</span>
                <span class="text-[10px] md:text-sm text-blue-200/70 mt-1 md:mt-2">DAKƒ∞KA</span>
            </div>
            <div id="box-seconds" class="neon-box flex flex-col items-center p-3 md:p-4 bg-white/5 rounded-xl md:rounded-2xl backdrop-blur-md border border-white/10 w-20 md:w-40 relative overflow-hidden transition-all duration-500 cursor-default">
                <span id="seconds" class="digit text-2xl md:text-6xl font-black relative z-10 text-blue-400 drop-shadow-lg">00</span>
                <span class="text-[10px] md:text-sm text-blue-200/70 mt-1 md:mt-2 relative z-10">SANƒ∞YE</span>
            </div>
        </div>
    </main>

    <script>
        // KONTROL PANELƒ∞ (GUI)
        const gui = new lil.GUI({ title: 'Y√ñNETMEN PANELƒ∞' });
        
        // Varsayƒ±lan Ayarlar
        const config = {
            // AƒûA√á
            treeX: -35,
            treeY: -12,
            treeZ: 10,
            treeScale: 25,
            
            // KARDAN ADAM
            snowX: 35,
            snowY: -12,
            snowZ: 10,
            snowScale: 15,
            
            // KAMERA
            camZ: 60
        };

        // --- 3D SAHNE ---
        let scene, camera, renderer, treeGroup, snowmanGroup;
        let itemsLoaded = 0;
        const loadingScreen = document.getElementById('loading-screen');

        function forceOpen() {
            loadingScreen.style.opacity = 0;
            setTimeout(() => loadingScreen.style.display = 'none', 500);
        }
        window.addEventListener('load', function() { setTimeout(forceOpen, 3000); });

        function checkLoading() {
            itemsLoaded++;
            if(itemsLoaded >= 2) forceOpen();
        }

        function initThreeJS() {
            const container = document.getElementById('canvas-container');
            scene = new THREE.Scene();
            
            // GUI: KAMERA AYARLARI
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, config.camZ); 
            
            const folderCam = gui.addFolder('Kamera');
            folderCam.add(config, 'camZ', 10, 150).onChange(v => camera.position.z = v);

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            const ambientLight = new THREE.AmbientLight(0xffffff, 2.5); 
            scene.add(ambientLight);
            const dirLight = new THREE.DirectionalLight(0xffd700, 3.0); 
            dirLight.position.set(20, 50, 20);
            scene.add(dirLight);

            const loader = new THREE.GLTFLoader();

            // GUI: AƒûA√á AYARLARI
            const folderTree = gui.addFolder('Aƒüa√ß (Sol)');
            
            loader.load('tree-decorated-snow.glb', function (gltf) {
                const model = gltf.scene;
                treeGroup = new THREE.Group();
                treeGroup.add(model);
                
                // Ba≈ülangƒ±√ß Deƒüerlerini Uygula
                model.scale.set(config.treeScale, config.treeScale, config.treeScale);
                treeGroup.position.set(config.treeX, config.treeY, config.treeZ);
                
                scene.add(treeGroup);
                checkLoading();
                
                // GUI Baƒülantƒ±larƒ±
                folderTree.add(config, 'treeX', -100, 0).name('Saƒü/Sol').onChange(v => treeGroup.position.x = v);
                folderTree.add(config, 'treeY', -50, 20).name('Yukarƒ±/A≈üaƒüƒ±').onChange(v => treeGroup.position.y = v);
                folderTree.add(config, 'treeZ', -50, 50).name('ƒ∞leri/Geri').onChange(v => treeGroup.position.z = v);
                folderTree.add(config, 'treeScale', 1, 100).name('Boyut').onChange(v => model.scale.set(v,v,v));

            }, undefined, function() { checkLoading(); });

            // GUI: KARDAN ADAM AYARLARI
            const folderSnow = gui.addFolder('Kardan Adam (Saƒü)');

            loader.load('snowman.glb', function (gltf) {
                const model = gltf.scene;
                snowmanGroup = new THREE.Group();
                snowmanGroup.add(model);
                
                // Ba≈ülangƒ±√ß
                model.scale.set(config.snowScale, config.snowScale, config.snowScale);
                model.rotation.y = -0.8;
                snowmanGroup.position.set(config.snowX, config.snowY, config.snowZ);
                
                scene.add(snowmanGroup);
                checkLoading();
                
                // GUI Baƒülantƒ±larƒ±
                folderSnow.add(config, 'snowX', 0, 100).name('Saƒü/Sol').onChange(v => snowmanGroup.position.x = v);
                folderSnow.add(config, 'snowY', -50, 20).name('Yukarƒ±/A≈üaƒüƒ±').onChange(v => snowmanGroup.position.y = v);
                folderSnow.add(config, 'snowZ', -50, 50).name('ƒ∞leri/Geri').onChange(v => snowmanGroup.position.z = v);
                folderSnow.add(config, 'snowScale', 1, 100).name('Boyut').onChange(v => {
                    model.scale.set(v,v,v);
                    // Varsa ≈üapkayƒ± da g√ºncellemek gerekir ama ≈üimdilik basit tutalƒ±m
                });

                loader.load('snowman-hat.glb', function (hatGltf) {
                    const hat = hatGltf.scene;
                    hat.scale.set(config.snowScale, config.snowScale, config.snowScale);
                    hat.position.set(0, 7, 0); // G√∂receli konum
                    hat.rotation.y = -0.8;
                    snowmanGroup.add(hat);
                });

            }, undefined, function() { checkLoading(); });

            animate3D();
        }

        function animate3D() {
            requestAnimationFrame(animate3D);
            renderer.render(scene, camera);
        }

        function updateCameraByScreenSize() {
            if (!camera || !renderer) return;
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        window.addEventListener('resize', updateCameraByScreenSize);
        initThreeJS();
        
        // Bo≈ü fonksiyonlar (Hata vermemesi i√ßin)
        function enableAudio() {} 
    </script>
</body>
</html>
