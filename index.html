<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AÄŸaÃ§ Dedektifi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

        body {
            font-family: 'Orbitron', sans-serif;
            background-color: #0f172a; 
            color: white;
            overflow: hidden; margin: 0;
        }

        /* DEBUG PANELÄ° */
        #debug-panel {
            position: fixed; top: 10px; left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px; border-radius: 8px;
            border: 1px solid #ffff00;
            font-family: monospace; z-index: 100;
            pointer-events: none;
        }
        .val { color: #00ff00; font-weight: bold; }

        /* SAYAÃ‡ (REFERANS Ä°Ã‡Ä°N) */
        .counter-container { 
            position: absolute; top: 50%; left: 50%; 
            transform: translate(-50%, -50%); 
            z-index: 50; pointer-events: none;
            display: flex; gap: 20px;
        }
        .neon-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px; border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
            text-align: center;
        }

        #canvas-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10;
        }
    </style>
</head>
<body>

    <div id="debug-panel">
        <h3 class="text-yellow-400 font-bold mb-2">ðŸŒ² AÄžAÃ‡ ANALÄ°ZÄ°</h3>
        <div>Durum: <span id="status" class="text-gray-400">YÃ¼kleniyor...</span></div>
        <hr class="border-gray-600 my-2">
        <div>Konum X: <span id="posX" class="val">--</span></div>
        <div>Konum Y: <span id="posY" class="val">--</span></div>
        <div>Konum Z: <span id="posZ" class="val">--</span></div>
        <div>Scale : <span id="scaleVal" class="val">--</span></div>
        <div class="mt-2 text-xs text-gray-400">
            Sol TÄ±k: DÃ¶ndÃ¼r | SaÄŸ TÄ±k: KaydÄ±r | Tekerlek: Zoom
        </div>
    </div>

    <div class="counter-container">
        <div class="neon-box">
            <div class="text-4xl font-bold">31</div>
            <div class="text-xs">GÃœN</div>
        </div>
        <div class="neon-box">
            <div class="text-4xl font-bold">12</div>
            <div class="text-xs">SAAT</div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <script>
        let scene, camera, renderer, controls, treeModel;
        
        // DOM Elementleri
        const elStatus = document.getElementById('status');
        const elX = document.getElementById('posX');
        const elY = document.getElementById('posY');
        const elZ = document.getElementById('posZ');
        const elScale = document.getElementById('scaleVal');

        function init() {
            const container = document.getElementById('canvas-container');

            // 1. SAHNE
            scene = new THREE.Scene();
            // Referans iÃ§in Ä±zgara (Her kare 10 birim)
            const gridHelper = new THREE.GridHelper(200, 20, 0xff0000, 0x444444);
            scene.add(gridHelper);
            const axesHelper = new THREE.AxesHelper(20); // X:KÄ±rmÄ±zÄ±, Y:YeÅŸil, Z:Mavi
            scene.add(axesHelper);

            // 2. KAMERA (Genel BakÄ±ÅŸ AÃ§Ä±sÄ±)
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 80); // Biraz yukarÄ±dan ve geriden

            // 3. RENDERER
            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // 4. KONTROLLER
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            
            // 5. IÅžIKLAR (Ã‡ok Parlak YapalÄ±m ki GÃ¶relim)
            const ambientLight = new THREE.AmbientLight(0xffffff, 3.0);
            scene.add(ambientLight);
            const dirLight = new THREE.DirectionalLight(0xffffff, 2.0);
            dirLight.position.set(10, 20, 10);
            scene.add(dirLight);

            // 6. AÄžACI YÃœKLE (Sadece AÄŸaÃ§)
            const loader = new THREE.GLTFLoader();
            
            // Dosya isminin doÄŸruluÄŸundan emin olalÄ±m
            loader.load('tree-decorated-snow.glb', function (gltf) {
                elStatus.innerText = "âœ… YÃœKLENDÄ°";
                elStatus.className = "text-green-400 font-bold";

                treeModel = gltf.scene;
                
                // Hedeflenen Konum ve Boyut (Son kodumuzdaki deÄŸerler)
                treeModel.scale.set(18, 18, 18); 
                treeModel.position.set(-15, -12, 20); 

                scene.add(treeModel);

                // SARI KUTU (Bounding Box) - AÄŸacÄ±n kapladÄ±ÄŸÄ± alanÄ± gÃ¶sterir
                const box = new THREE.BoxHelper(treeModel, 0xffff00);
                scene.add(box);

                updateStats();

            }, 
            function (xhr) {
                elStatus.innerText = "YÃ¼kleniyor: " + Math.round((xhr.loaded / xhr.total * 100)) + "%";
            },
            function (error) {
                console.error(error);
                elStatus.innerText = "âŒ HATA (Dosya BulunamadÄ±)";
                elStatus.className = "text-red-500 font-bold";
            });

            animate();
        }

        function updateStats() {
            if(treeModel) {
                elX.innerText = treeModel.position.x.toFixed(2);
                elY.innerText = treeModel.position.y.toFixed(2);
                elZ.innerText = treeModel.position.z.toFixed(2);
                elScale.innerText = treeModel.scale.x.toFixed(2);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init();
    </script>
</body>
</html>
